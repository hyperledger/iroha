# This file is generated by iroha_swarm.
# Do not edit it manually.

version: '3.8'
services:
  iroha0:
    build: ./
    image: iroha2:dev
    container_name: iroha2-0
    platform: linux/amd64
    environment:
      IROHA_CHAIN_ID: 00000000-0000-0000-0000-000000000000
      IROHA_CONFIG: /config/config.json
      IROHA_PUBLIC_KEY: ed01208BA62848CF767D72E7F7F4B9D2D7BA07FEE33760F79ABE5597A51520E292A0CB
      IROHA_PRIVATE_KEY: '{"digest_function":"ed25519","payload":"8f4c15e5d664da3f13778801d23d4e89b76e94c1b94b389544168b6cb894f84f8ba62848cf767d72e7f7f4b9d2d7ba07fee33760f79abe5597a51520e292a0cb"}'
      TORII_P2P_ADDR: 0.0.0.0:1337
      TORII_API_URL: 0.0.0.0:8080
      IROHA_GENESIS_PUBLIC_KEY: ed01204164BF554923ECE1FD412D241036D863A6AE430476C898248B8237D77534CFC4
      IROHA_GENESIS_PRIVATE_KEY: '{"digest_function":"ed25519","payload":"82b3bde54aebeca4146257da0de8d59d8e46d5fe34887dcd8072866792fcb3ad4164bf554923ece1fd412d241036d863a6ae430476c898248b8237d77534cfc4"}'
      IROHA_GENESIS_FILE: /config/genesis.json
    ports:
    - 1337:1337
    - 8080:8080
    volumes:
    - ./configs/peer:/config
    init: true
    command: iroha --submit-genesis
    healthcheck:
      test: if ! [[ `curl -X GET http://127.0.0.1:8080/status/blocks` =~ [1-9] ]]; then exit 1; fi
      interval: 10s
      timeout: 5s
      retries: 6
      start_period: 1s
